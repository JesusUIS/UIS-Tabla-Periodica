function load_scripts(e){try{if("lw"==$.cookie("fs_srp")&&fishersci.components.SignalsStatic==undefined)try{$("head").append('<script src="/catalog/search/static/resources/js/signals.min.js?v='+e+'"><\/script>')}catch(t){}}catch(t){}}NS("fishersci.components").SearchBar=function(){var e,a,r,i,o,n,s,c,l,u,d,m,p,h,f,g,y,v,w,_,b,C,S,I,k,x,N,A,R,L=$(".global_search"),T=!0,B=!1,F=!0;return{init:function(){var e=this;switch(e.initVariables(),e.initEventHandlers(),e.initSearchMobile(),"ca"!=y?g&&g.items&&g.items.length>0?e.initFcousAreaItems():e.initFocusAreaDefault():($(".select-wrapper").addClass("hidden"),$(".input-wrapper").addClass("width-full"),store.set("type_ahead_url","/{countryCode}/{langCode}/catalog/service/typeahead/suggestion?term={keyword}"),store.set("search_url","/{countryCode}/{langCode}/catalog/search/products?keyword={keyword}")),L.length&&e.doTypeAhead(),""!==fishersci.Common.getQueryString("keyword")?store.session.set("keywordAvailable",!0):store.session.remove("keywordAvailable"),fishersci.SearchCommon.showSearchTerm()&&""!==$.trim(store.session.get("keyword"))?(_.val(store.session.get("keyword")),$(u).removeClass("hide")):_.val(""),fishersci.Common.getBreakpoint()){case"mobile":case"tablet":_.attr("placeholder",I18n.t("searchResults.search"));break;default:_.attr("placeholder",I18n.t("searchResults.placeholder"))}},initVariables:function(){a="#SearchBox",r="#search_form",i=".search_fields",o="#search_button",n="#SCSearchTerm",s="#search-label",c="#nodeSection",l="#selectedIndustry",u=".search_remove",p=".global_search",m=".search-mobile",h=".input-wrapper",f="#focusarea-dropdown",e="FocusArea|",g=window.focusAreaConfig||{},y=LocalePath.getCountry(),v=LocalePath.getLanguage(),w=["fisherCatNum","supplierCatNum","casNum"],d="/"+y+"/"+v+"/catalog/search/products",_=$(a),b=$(r),C=$(o),S=$(i),I=$(n),k=$(s),x=$(c),N=$(l),b.attr("action",d),k.text(searchButtonLabel),x.addClass(searchHeaderClass),A="",R=""},initEventHandlers:function(){function t(){"FocusArea|"!=e&&(fisherDataLayer.searchData.searchType=e)}_.blur(function(){S.removeClass("active")}),_.on("keydown",function(e){t();var a=this;13==e.keyCode&&($("ul.ui-autocomplete").remove(),g&&g.items&&g.items.length>0&&fishersci.components.SearchBar.doSubmitForm(a.value))}),C.on("click",function(){t();var e=$(this).closest("form").find(a).val();g&&g.items&&g.items.length>0?fishersci.components.SearchBar.doSubmitForm(e):_.closest(r).submit()}),N.change(function(){t();var e=$(this).prop("selectedIndex");selectIndustry(e)}),$(u).on("click",function(){_.val(""),$(this).addClass("hide"),store.session.remove("keyword")})},initSearchMobile:function(){$(m).on("click",function(){fishersci.components.SearchBar.toggleSearchMobile()})},initFcousAreaItems:function(){var t,a,r,i,o,n,s,c,l,u,d,m,p,h,f,w,C,S,I=I||{},k={},x=[],N=window.location.href;I.items=I.items||{},I.itemSelector=function(){function t(e){return e.find(".focus-area-selector")}function a(t,a){if(m=$("<select class='focus-area-selector' id='focusarea-dropdown'></select>"),m.appendTo(".select-wrapper"),"undefined"!=typeof categoryName&&""!=categoryName){B=!0;var r=categoryName;categoryName.length>21&&"mobile"!=fishersci.Common.getBreakpoint()&&(r=categoryName.substr(0,21)+"&hellip;",R=categoryName),$("html").hasClass("ie7")||$("html").hasClass("ie8")||$("html").hasClass("ie9")||!T||(F=!1,g.items.unshift({group:null,id:"browse-categories",title:r,searchURL:"/{countryCode}/{langCode}/browse/"+nodeBrowseCatId+"/"+categoryName.replace(/ /g,"-").replace(/,/g,"").toLowerCase()+"?keyword={keyword}",typeAheadURL:"/{countryCode}/{langCode}/catalog/service/typeahead/suggestion?term={keyword}",include:null,exclude:null,activation:null}));var i=r;i.search("&hellip;")>0&&(i=i.replace(/\.|&hellip;/g,"...")),e=e+i+"|"+i}return void 0===m.selectmenu("instance")&&m.selectmenu({select:function(t,a){t&&t.preventDefault();for(var r,i=0;i<g.items.length;i++)if(g.items[i].id==this.value){r=i;var o=g.items[i].title;o.search("&hellip;")>0&&(o=o.replace(/\.|&hellip;/g,"...")),e=e.replace(/\|[^\|]+$/g,"|"+o)}S=g.items[r],store.set("search_url",S.searchURL),store.set("type_ahead_url",S.typeAheadURL),fishersci.components.SearchBar.setWrapper(0),_.focus(),_autoCompleteCache=[]}}),m}function r(e,t){return e.find("option[value='"+t.id+"']").length>0}function i(e,t){w=e.find("option[value='"+t+"']"),w.remove()}function o(e,t){f=$("<option value='"+t.id+"'>"+t.name+"</option>"),t.group?(C=n(e,t.group),C.append(f)):e.append(f)}function n(e,t){return C=e.find("optgroup[label='"+t+"']"),0==C.length&&(C=$("<optgroup label='"+t+"'></optgroup>"),e.append(C)),C}return function(){return h=b,{_selectorExists:function(){return p=t(h),p.length>0},_createSelector:function(e,t,r){a(h,e)},_addToSelector:function(e){e&&(p=t(h),p.length>0&&(r(p,e)||o(p,e)))},_removeFromSelector:function(e){p=t(h),i(p,e)},_setActive:function(e){p=t(h),p.val(e).selectmenu("refresh"),fishersci.components.SearchBar.setWrapper(25);for(var a,r=0;r<g.items.length;r++)if(g.items[r].id==e){a=r;break}S=void 0===a?g.items[p.prop("selectedIndex")]:g.items[a],store.set("search_url",S.searchURL),store.set("type_ahead_url",S.typeAheadURL)}}}}(),focusAreaItem=function(e,t,a,r,i,o,n,s){return function(c){var l={id:e,name:t,group:i,actionPath:a,typeAheadUrl:r,include:o,exclude:n,activation:s};return c=$.extend(!0,l,c),c.include&&(c.include=new RegExp(c.include,"i")),c.exclude&&(c.exclude=new RegExp(c.exclude,"i")),c.activation&&(c.activation=new RegExp(c.activation,"i")),{id:c.id,name:c.name,group:c.group,include:c.include,exclude:c.exclude,activation:c.activation,isIncluded:function(e){var t=!0,a=!1;return this.include&&(t=this.include.test(e)),this.exclude&&(a=this.exclude.test(e)),t&&!a}}}},I.items.allSources=new focusAreaItem("all-categories","Search All","//"+window.location.hostname+"/"+y+"/"+v+"/catalog/search/products?keyword={keyword}","//"+window.location.hostname+"/"+y+"/"+v+"/catalog/service/typeahead/suggestion?term={keyword}");var A={_addItem:function(e){e&&e.isIncluded(N)&&k&&e.id&&(k[e.id]=e,A.itemSelector&&(A.itemSelector._selectorExists()||A.itemSelector._createSelector(function(e){A._setActiveItem(e)}),A.itemSelector._addToSelector(e)))},_setActiveItem:function(e){k&&e&&k[e]&&(a=k[e],A.itemSelector&&A.itemSelector._setActive(e))},_removeItem:function(e){if(k&&e){l=Object.keys,l||(l=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a);return t}),delete k[e],A.itemSelector._removeFromSelector(e);var t=l(k);a.id==e&&A._setActiveItem(t[0])}},_setMatchedRules:function(e){if(d=!1,e&&e.activation&&e.isIncluded(N)){e.matchedRules=[],u=e.activation.source.split("|");for(var t=0;t<u.length;t++)""!=u[t]&&(u[t]=new RegExp(u[t],"i"),u[t].test(N)&&(e.matchedRules.push({rule:u[t]}),d=!0))}return d},_indexItems:function(e){for(var t=0;t<e.length;t++)e[t].rank=t,e[t].matchedRules.length>1&&e[t].matchedRules.sort(function(e,t){});return e.sort(function(e,t){}),e[0]}};if(A.itemSelector=I.itemSelector(),r=I.items.allSources(),A._addItem(r),i=r.id,s=N.indexOf("nav="),-1!=s&&(n=N.substring(s).split("&")[0]+"&"),g&&g.items&&g.items.length>0){for(var L=0;L<g.items.length;L++){t=g.items[L],t.id==r.id&&(A._setActiveItem(i),A._removeItem(r.id));var Q=new focusAreaItem(t.id||"item_"+L,t.title,t.searchURL,t.typeAheadURL,t.group,t.include,t.exclude,t.activation)();A._addItem(Q),d=A._setMatchedRules(Q);var E=fishersci.Common.getQueryString("keyword");d?x.push(Q):-1!==N.indexOf(t.searchURL.replace("{keyword}",E))&&(i=Q.id),c=t.searchURL+"&",n&&-1!=c.indexOf(n)&&(i=Q.id)}x[0]&&(o=A._indexItems(x),i=o.id)}return A._setActiveItem(B&&T?"browse-categories":i),"mobile"==fishersci.Common.getBreakpoint()&&$("span.ui-selectmenu-text").css("max-width",window.innerWidth-30+"px"),$("span.ui-selectmenu-text").attr("title",R),A},doTypeAhead:function(){function e(e){if(200==e.statusCode){i=[];var t="undefined"!=e.fusionQueryId?e.fusionQueryId:"";return"undefined"!=typeof e.topSearchTerms&&(i=i.concat(a({data:e.topSearchTerms,cat:"mostPopular",valKey:"dimVal",groupTitle:!1,fusionQueryId:t}))),"undefined"!=typeof e.categories&&(i=i.concat(a({data:e.categories,cat:"prodCat",groupTitle:e.typeaheadLabels.categories,valKey:"dimVal",fusionQueryId:t}))),"undefined"!=typeof e.productName&&(i=i.concat(a({data:e.productName,cat:"prodName",groupTitle:e.typeaheadLabels.productName,fusionQueryId:t}))),"undefined"!=typeof e.fisher_Catalog_Number&&(i=i.concat(a({data:e.fisher_Catalog_Number,cat:"fisherCatNum",groupTitle:e.typeaheadLabels.fisher_Catalog_Number,fusionQueryId:t}))),"undefined"!=typeof e.supplier_Catalog_Number&&(i=i.concat(a({data:e.supplier_Catalog_Number,cat:"supplierCatNum",groupTitle:e.typeaheadLabels.supplier_Catalog_Number,fusionQueryId:t}))),"undefined"!=typeof e.casNumber&&(i=i.concat(a({data:e.casNumber,cat:"casNum",groupTitle:e.typeaheadLabels.casNumber,fusionQueryId:t}))),"undefined"!=typeof e.chemical_Formula&&(i=i.concat(a({data:e.chemical_Formula,cat:"chemFormula",groupTitle:"Chemical Formula ",fusionQueryId:t}))),"undefined"!=typeof e.supplier_Name&&(i=i.concat(a({data:e.supplier_Name,cat:"supplierName",groupTitle:e.typeaheadLabels.supplier_Name,valKey:"dimVal",fusionQueryId:t}))),o=10,i=$.map(i,function(e){return o?(-1!=e.id&&o--,e):null}),N[x]=i,i}}function a(e){return n=e.valKey?e.valKey:"value",C=$.map(e.data,function(t){return S=$.trim(t[n]),I=t.dimensionId?""+t.dimensionId:"0",$.inArray(e.cat,w)>-1&&!S.replace(/-/g,"").match(new RegExp("^"+x.replace(/-/g,""),"i"))?null:{label:S,value:S,id:$.trim(I),cat:e.cat,fusionQueryId:e.fusionQueryId}}),C.length>0&&0!=e.groupTitle&&C.unshift({label:e.groupTitle,value:x,id:"-1",cat:e.cat}),C}var i,o,n,s,c,l,u,d,m,p,h,f,b,C,S,I,k,x="",N={};if(!_.length||!F)return!1;s="//"+window.location.hostname+"/"+y+"/"+v+"/catalog/service/typeahead/suggestion",c="json",_.autocomplete({source:function(t,a){x=$.trim(t.term),l=!0,"undefined"!=typeof N[x]?a(N[x]):x.length>2&&(m=null,"string"==typeof c&&"jsonp"==c&&(m="jsoncallback"),g&&g.items&&g.items.length>0&&store.get("type_ahead_url")&&(k=store.get("type_ahead_url"),s=k.replace(/{countryCode}/,y).replace(/{langCode}/,v).replace(/term={keyword}/,"").replace(/keyword={keyword}/,"")),$.ajax({url:s,dataType:c,jsonp:m,data:{term:t.term,keyword:t.term,type:"fisher",count:10,clientId:"",estore:"RE_SC"},success:function(t){"object"==typeof t&&null!==t&&(i=e(t),a(i))}}))},minLength:3,select:function(e,t){"-1"!=t.item.id&&(_.val(t.item.value),t.item.cat&&_.parent().append('<input type="hidden" name="typeAheadCat" value="'+t.item.cat+'" />'),_.val(t.item.value),g&&g.items&&g.items.length>0?fishersci.components.SearchBar.doSubmitForm(t.item.value):_.closest(r).submit())},appendTo:null,open:function(e,t){$(".ui-autocomplete").width($(r).width()-2),$(".ui-menu-item:last",".ui-autocomplete").addClass("searchFor"),"lw"==$.cookie("fs_srp")&&fishersci.components.SignalsStatic.init()},delay:300}).data("ui-autocomplete")._renderItem=function(e,a){return"-1"!=a.id?(u=!u,u&&(d="even"),p=new RegExp("[-.*+?|^${}()[\\]\\/\\\\]","g"),h=this.term.replace(p,"\\$&"),h=h.replace(/[\s]+/g,"|"),re=new RegExp("("+h+")","gi"),t=a.label.replace(re,"<strong>$1</strong>"),$('<li class="ta-entry '+A+'"></li>').data("item.autocomplete",a).append($("<a />").html(t)).addClass(d).addClass("lw_signal_process").attr("data-keyword",h).attr("data-suggestion",a.label).attr("data-group",A).attr("data-fusion_query_id",a.fusionQueryId).attr("data-parameters","keyword,suggestion,group,fusion_query_id").appendTo(e)):(u=!1,f=$(document.createElement("span")),f.html(a.label),A=a.label.replace(/\s/g,"").toLowerCase(),b=$(document.createElement("div")),b.addClass("ta-category"),l&&(b.addClass("ta-first"),l=!1),$('<li class="ta-header"></li>').data("item.autocomplete",a).append(b.append(f)).appendTo(e))},l=!0,u=!1},doSubmitForm:function(e){var t,a=store.get("search_url");return a||(a=g.items[0].searchURL),store.session.set("keyword",e),e=$.trim(e),e=encodeURI(e).replace(/[!'(),"*]/gi,"").replace(/\%20/g,"+"),t=a.replace(/{countryCode}/,y).replace(/{langCode}/,v).replace(/{keyword}/,e),-1==a.indexOf("keyword")&&(t=t.replace(/\/$/,"")+"/"+e),b.submit(function(e){e.preventDefault()}),window.location.href=t,!1},toggleSearchMobile:function(){$(p).hasClass("active")?fishersci.components.SearchBar.resetSearchMobile():fishersci.components.SearchBar.activateSearchMobile()},resetSearchMobile:function(){$(p).removeClass("active"),fishersci.components.Header.removeClickOverlay()},activateSearchMobile:function(){fishersci.components.Header.resetNav(),fishersci.components.Header.resetAccountDropDown(),$(p).addClass("active"),$(a).focus(),fishersci.components.Header.setClickOverlay()},setWrapper:function(e){if($(f+"-button").width("auto"),fishersci.Common.inMobileBreakpoint())$(h).width("100%"),$(a).width("100%");else{var t=(navigator.userAgent,!!document.documentMode),r=(!t&&window.StyleMedia,S.width()),i=$(".ui-selectmenu-text").outerWidth(),o=$(a).width();$(h).width(r-i-e-2),$(a).width(Math.min($(h).outerWidth()-54),o),$(a).width()<364&&$(a).css("text-overflow","ellipsis")}}}}();